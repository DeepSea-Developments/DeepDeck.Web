{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { finalize } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"src/app/core/services/api/api.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/common\";\n\nfunction ConfirmationDialogComponent_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ConfirmationDialogComponent_mat_spinner_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\", 8);\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"diameter\", 24);\n  }\n}\n\nexport let ConfirmationDialogComponent = /*#__PURE__*/(() => {\n  class ConfirmationDialogComponent {\n    constructor(dialogRef, data, apiService, // Inject ApiService\n    router // Inject the Router\n    ) {\n      this.dialogRef = dialogRef;\n      this.data = data;\n      this.apiService = apiService;\n      this.router = router;\n      this.isLoading = false;\n      this.element = data.element;\n    }\n\n    onCancelClick() {\n      this.dialogRef.close(false);\n    }\n\n    onConfirmClick() {\n      this.isLoading = true;\n      const uuid = this.element.uuid;\n      this.apiService.deleteElement(uuid).pipe(finalize(() => {\n        this.isLoading = false;\n      })).subscribe(response => {\n        // Handle successful delete\n        this.dialogRef.close(true); // Reload the current page\n\n        this.router.navigateByUrl('/', {\n          skipLocationChange: true\n        }).then(() => {\n          this.router.navigate(['/keymap']);\n        });\n      }, error => {\n        // Handle error and display a message\n        if (error.status === 400) {\n          alert('An error occurred while deleting the element: ' + error.error.message);\n        } else {\n          alert('An error occurred while deleting the element.');\n        }\n      });\n    }\n\n  }\n\n  ConfirmationDialogComponent.ɵfac = function ConfirmationDialogComponent_Factory(t) {\n    return new (t || ConfirmationDialogComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  ConfirmationDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ConfirmationDialogComponent,\n    selectors: [[\"app-confirmation-dialog\"]],\n    decls: 18,\n    vars: 6,\n    consts: [[1, \"confirmation-dialog\"], [\"mat-dialog-title\", \"\"], [\"mat-dialog-content\", \"\"], [\"mat-dialog-actions\", \"\"], [\"mat-button\", \"\", 3, \"disabled\", \"click\"], [\"mat-button\", \"\", \"color\", \"warn\", 2, \"position\", \"relative\", 3, \"disabled\", \"click\"], [4, \"ngIf\"], [\"style\", \"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);\", 3, \"diameter\", 4, \"ngIf\"], [2, \"position\", \"absolute\", \"top\", \"50%\", \"left\", \"50%\", \"transform\", \"translate(-50%, -50%)\", 3, \"diameter\"]],\n    template: function ConfirmationDialogComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n        i0.ɵɵtext(2, \"Confirm Delete \");\n        i0.ɵɵelementStart(3, \"strong\");\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(5, \" Layer\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 2)(7, \"p\");\n        i0.ɵɵtext(8, \"Are you sure you want to delete the layer \");\n        i0.ɵɵelementStart(9, \"strong\");\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(11, \"?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 3)(13, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function ConfirmationDialogComponent_Template_button_click_13_listener() {\n          return ctx.onCancelClick();\n        });\n        i0.ɵɵtext(14, \"Cancel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function ConfirmationDialogComponent_Template_button_click_15_listener() {\n          return ctx.onConfirmClick();\n        });\n        i0.ɵɵtemplate(16, ConfirmationDialogComponent_span_16_Template, 2, 0, \"span\", 6);\n        i0.ɵɵtemplate(17, ConfirmationDialogComponent_mat_spinner_17_Template, 1, 1, \"mat-spinner\", 7);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.element.name);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.element.name);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", ctx.isLoading);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", ctx.isLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n      }\n    },\n    directives: [i1.MatDialogTitle, i1.MatDialogContent, i1.MatDialogActions, i4.MatButton, i5.NgIf],\n    styles: [\"[_nghost-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;font-weight:700}[_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{color:#c9c9c9;font-size:1rem;line-height:1.5em}[_nghost-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;margin-top:1rem}[_nghost-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{color:#fff;background-color:#8d8d8d;border-radius:4px;padding:6px 12px}[_nghost-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child:hover{background-color:gray}[_nghost-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{color:#fff;background-color:#f44336;border-radius:4px;padding:6px 12px}[_nghost-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child:hover{background-color:#f32c1e}\"]\n  });\n  return ConfirmationDialogComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}